limits=c(10, 35)) +
scale_x_discrete(name = "US. States") +
ggtitle("ASD Prevalence with 95% CI by State [ADDM] [Year 2014]") +
theme(title = element_text(face = 'bold.italic', color = "darkslategrey"),
axis.title = element_text(face = 'plain', color = "darkslategrey"),
legend.position = 'none') +
geom_text(aes(label=Prevalence), hjust=0.5, color="black", size=3.5)  # Show data label inside bars
# Show plot
p
# Point plot/chart
p = ggplot(ASD_State_Subset, aes(x = reorder(State_Full1, Prevalence, median), # Order States by median of Prevalence
y = Prevalence)) +
geom_point(stat="identity", aes(colour = reorder(State_Full1, Prevalence, median)), size = 10, alpha = 0.1, pch = 15) + # fill color by State
scale_colour_discrete(guide = guide_legend(title = "US. States")) + # Legend Name
scale_y_continuous(name = "Prevalence per 1,000 Children",
breaks = seq(10, 35, 5),
limits=c(10, 35)) +
scale_x_discrete(name = "US. States") +
ggtitle("ASD Prevalence with 95% CI by State [ADDM] [Year 2014]") +
theme(title = element_text(face = 'bold.italic', color = "darkslategrey"),
axis.title = element_text(face = 'plain', color = "darkslategrey"),
legend.position = 'none') +
geom_text(aes(label=Prevalence), hjust=0.5, color="black", size=3.5)  # Show data label inside bars
# Show plot
p
# Add Lower.CI
p = p + geom_point(data = ASD_State_Subset, aes(x = reorder(State_Full1, Prevalence, median), y = Lower.CI,
shape=Source # point shape
),
size = 2 # point size
) +
#  geom_text(aes(label=Lower.CI), hjust=-0.1, vjust=3, color="darkslategrey", size=2.5) + # Show data label inside bars
scale_shape_manual(values=3)  # manual define point shape
# Show plot
p
# Add Upper.CI
p = p + geom_point(data = ASD_State_Subset, aes(x = reorder(State_Full1, Prevalence, median), y = Upper.CI,
shape=Source # point shape
),
size = 2 # point size
)
#  geom_text(aes(label=Upper.CI), hjust=-0.1, vjust=-3, color="darkslategrey", size=2.5) # Show data label inside bars
# Show plot
p
# theme of the economist magazine:
p + theme_economist() + scale_colour_economist() + scale_colour_discrete(guide = guide_legend(title = "US. States")) + theme(legend.position = 'none')
# Dynamic chart
p <- p + theme_economist() + scale_colour_economist() + theme(legend.position = 'none')
p_dynamic <- ggplotly(p)
p_dynamic
# theme of the economist magazine:
p + theme_economist() + scale_colour_economist() + scale_colour_discrete(guide = guide_legend(title = "US. States")) + theme(legend.position = 'none')
#  geom_text(aes(label=Upper.CI), hjust=-0.1, vjust=-3, color="darkslategrey", size=2.5) # Show data label inside bars
# Show plot
p
# theme of the economist magazine:
p + theme_economist() + scale_colour_economist() + scale_colour_discrete(guide = guide_legend(title = "US. States")) + theme(legend.position = 'none')
#  geom_text(aes(label=Upper.CI), hjust=-0.1, vjust=-3, color="darkslategrey", size=2.5) # Show data label inside bars
# Show plot
p
# Point plot/chart
p = ggplot(ASD_State_Subset, aes(x = reorder(State_Full1, Prevalence, median), # Order States by median of Prevalence
y = Prevalence)) +
geom_point(stat="identity", aes(colour = reorder(State_Full1, Prevalence, median)), size = 10, alpha = 0.1, pch = 15) + # fill color by State
scale_colour_discrete(guide = guide_legend(title = "US. States")) + # Legend Name
scale_y_continuous(name = "Prevalence per 1,000 Children",
breaks = seq(10, 35, 5),
limits=c(10, 35)) +
scale_x_discrete(name = "US. States") +
ggtitle("ASD Prevalence with 95% CI by State [ADDM] [Year 2014]") +
theme(title = element_text(face = 'bold.italic', color = "darkslategrey"),
axis.title = element_text(face = 'plain', color = "darkslategrey"),
legend.position = 'none') +
geom_text(aes(label=Prevalence), hjust=0.5, color="black", size=3.5)  # Show data label inside bars
# Show plot
p
# Add Lower.CI
p = p + geom_point(data = ASD_State_Subset, aes(x = reorder(State_Full1, Prevalence, median), y = Lower.CI,
shape=Source # point shape
),
size = 2 # point size
) +
#  geom_text(aes(label=Lower.CI), hjust=-0.1, vjust=3, color="darkslategrey", size=2.5) + # Show data label inside bars
scale_shape_manual(values=3)  # manual define point shape
# Show plot
p
# Point plot/chart
p = ggplot(ASD_State_Subset, aes(x = reorder(State_Full1, Prevalence, median), # Order States by median of Prevalence
y = Prevalence)) +
geom_point(stat="identity", aes(colour = reorder(State_Full1, Prevalence, median)), size = 10, alpha = 0.1, pch = 15) + # fill color by State
scale_colour_discrete(guide = guide_legend(title = "US. States")) + # Legend Name
scale_y_continuous(name = "Prevalence per 1,000 Children",
breaks = seq(10, 35, 5),
limits=c(10, 35)) +
scale_x_discrete(name = "US. States") +
ggtitle("ASD Prevalence with 95% CI by State [ADDM] [Year 2014]") +
theme(title = element_text(face = 'bold.italic', color = "darkslategrey"),
axis.title = element_text(face = 'plain', color = "darkslategrey"),
legend.position = 'right') +
geom_text(aes(label=Prevalence), hjust=0.5, color="black", size=3.5)  # Show data label inside bars
# Show plot
p
# Point plot/chart
p = ggplot(ASD_State_Subset, aes(x = reorder(State_Full1, Prevalence, median), # Order States by median of Prevalence
y = Prevalence)) +
geom_point(stat="identity", aes(colour = reorder(State_Full1, Prevalence, median)), size = 10, alpha = 0.1, pch = 15) + # fill color by State
scale_colour_discrete(guide = guide_legend(title = "US. States")) + # Legend Name
scale_y_continuous(name = "Prevalence per 1,000 Children",
breaks = seq(10, 35, 5),
limits=c(10, 35)) +
scale_x_discrete(name = "US. States") +
ggtitle("ASD Prevalence with 95% CI by State [ADDM] [Year 2014]") +
theme(title = element_text(face = 'bold.italic', color = "darkslategrey"),
axis.title = element_text(face = 'plain', color = "darkslategrey"),
legend.position = 'top') +
geom_text(aes(label=Prevalence), hjust=0.5, color="black", size=3.5)  # Show data label inside bars
# Show plot
p
# Point plot/chart
p = ggplot(ASD_State_Subset, aes(x = reorder(State_Full1, Prevalence, median), # Order States by median of Prevalence
y = Prevalence)) +
geom_point(stat="identity", aes(colour = reorder(State_Full1, Prevalence, median)), size = 10, alpha = 0.1, pch = 15) + # fill color by State
scale_colour_discrete(guide = guide_legend(title = "US. States")) + # Legend Name
scale_y_continuous(name = "Prevalence per 1,000 Children",
breaks = seq(10, 35, 5),
limits=c(10, 35)) +
scale_x_discrete(name = "US. States") +
ggtitle("ASD Prevalence with 95% CI by State [ADDM] [Year 2014]") +
theme(title = element_text(face = 'bold.italic', color = "darkslategrey"),
axis.title = element_text(face = 'plain', color = "darkslategrey"),
legend.position = 'none') +
geom_text(aes(label=Prevalence), hjust=0.5, color="black", size=3.5)  # Show data label inside bars
# Show plot
p
# Add Lower.CI
p = p + geom_point(data = ASD_State_Subset, aes(x = reorder(State_Full1, Prevalence, median), y = Lower.CI,
shape=Source # point shape
),
size = 2 # point size
) +
#  geom_text(aes(label=Lower.CI), hjust=-0.1, vjust=3, color="darkslategrey", size=2.5) + # Show data label inside bars
scale_shape_manual(values=3)  # manual define point shape
# Show plot
p
# Add Upper.CI
p = p + geom_point(data = ASD_State_Subset, aes(x = reorder(State_Full1, Prevalence, median), y = Upper.CI,
shape=Source # point shape
),
size = 2 # point size
)
#  geom_text(aes(label=Upper.CI), hjust=-0.1, vjust=-3, color="darkslategrey", size=2.5) # Show data label inside bars
# Show plot
p
# theme of the economist magazine:
p + theme_economist() + scale_colour_economist() + scale_colour_discrete(guide = guide_legend(title = "US. States")) + theme(legend.position = 'none')
# Dynamic chart
p <- p + theme_economist() + scale_colour_economist() + scale_colour_discrete(guide = guide_legend(title = "US. States")) + theme(legend.position = 'none')
p_dynamic <- ggplotly(p)
p_dynamic
# All year/time Prevalence data with: Source_UC == 'ADDM' & State_Full2 == 'AZ-Arizona'
ASD_State_Subset <- subset(ASD_State, Source_UC == 'ADDM' & State_Full2 == 'AZ-Arizona')
# Line plot/chart for < State ASD Prevalence [ADDM] [AZ-Arizona] >
p <- ggplot(ASD_State_Subset, aes(x = Year, y = Prevalence))
# Select (add) line chart type:
p <- p + geom_line(aes(color = State_Full2),
linetype = "solid",  # http://sape.inf.usi.ch/quick-reference/ggplot2/linetype
size=1,
alpha=0.5)
# Select (add) points to chart:
p <- p + geom_point(aes(color = State_Full2),
size=3,
shape=20,
alpha=0.5)
# Customize legend name:
p <- p + labs(color = "US. State")
# Adjust x and y axis, scale, limit and labels:
p <- p + scale_y_continuous(name = "Prevalence per 1,000 Children",
breaks = seq(0, 30, 5),
limits=c(0, 30)) +
scale_x_continuous(name = "Year",
breaks = seq(2000, 2016, 1),
limits = c(2000, 2016))
# Customize chart title:
p <- p + ggtitle("ASD Prevalence by Year [ADDM] [AZ-Arizona]")
# Customize chart title and axis labels:
p <- p + theme(title = element_text(face = 'bold.italic', color = "darkslategrey"),
axis.title = element_text(face = 'plain', color = "darkslategrey"))
# Show plot
p
# theme of the economist magazine:
p + theme_economist() + scale_colour_economist()
p <- ggplot(ASD_State_ADDM, aes(x = Year, y = Prevalence))
# Select (add) line chart type:
p <- p + geom_line(aes(color = State_Full2),
linetype = "solid",  # http://sape.inf.usi.ch/quick-reference/ggplot2/linetype
size=1,
alpha=0.5)
# Select (add) points to chart:
p <- p + geom_point(aes(color = State_Full2),
size=3,
shape=20,
alpha=0.5)
# Show plot
p
# Customize line color and legend name:
p <- p + labs(color = "US. State")
# Adjust x and y axis, scale, limit and labels:
p <- p + scale_y_continuous(name = "Prevalence per 1,000 Children",
breaks = seq(0, 30, 5),
limits=c(0, 30)) +
scale_x_continuous(name = "Year (2000 - 2016)",
breaks = seq(2000, 2016, 1),
limits = c(2000, 2016))
# Customize chart title:
p <- p + ggtitle("ASD Prevalence by Year [ADDM] [All States]")
# Customize chart title and axis labels:
p <- p + theme(title = element_text(face = 'bold.italic', color = "darkslategrey"),
axis.title = element_text(face = 'plain', color = "darkslategrey"),
legend.position="right")
# Show plot
p
# Dynamic chart
p <- p + theme_economist() + scale_colour_economist() + scale_colour_discrete(guide = guide_legend(title = "US. States")) + theme(legend.position = 'none')
p_dynamic <- ggplotly(p)
p_dynamic
p <- ggplot(ASD_State_ADDM, aes(x = Year, y = Prevalence))
# Select (add) line chart type:
p <- p + geom_line(aes(color = State_Full2),
linetype = "solid",  # http://sape.inf.usi.ch/quick-reference/ggplot2/linetype
size=1,
alpha=0.5)
# Select (add) points to chart:
p <- p + geom_point(aes(color = State_Full2),
size=3,
shape=20,
alpha=0.5)
# Show plot
p
# Customize line color and legend name:
p <- p + labs(color = "US. State")
# Adjust x and y axis, scale, limit and labels:
p <- p + scale_y_continuous(name = "Prevalence per 1,000 Children",
breaks = seq(0, 30, 5),
limits=c(0, 30)) +
scale_x_continuous(name = "Year (2000 - 2016)",
breaks = seq(2000, 2016, 1),
limits = c(2000, 2016))
# Customize chart title:
p <- p + ggtitle("ASD Prevalence by Year [ADDM] [All States]")
# Customize chart title and axis labels:
p <- p + theme(title = element_text(face = 'bold.italic', color = "darkslategrey"),
axis.title = element_text(face = 'plain', color = "darkslategrey"),
legend.position="right")
# Show plot
p
# Dynamic chart
p <- p + theme_economist() + scale_colour_economist() + scale_colour_discrete(guide = guide_legend(title = "US. States"))
p_dynamic <- ggplotly(p)
p_dynamic
# Show plot in facet_grid
p + facet_grid(facets = . ~ State_Full1) +
theme(legend.position = "none", # Hide legend
axis.text.x=element_blank(),  # Hide axis
axis.ticks.x=element_blank(), # Hide axis
panel.background = element_blank() # Remove panel background
)
# Dynamic chart
p_dynamic <- p + theme_economist() + scale_colour_economist() + scale_colour_discrete(guide = guide_legend(title = "US. States"))
p_dynamic <- ggplotly(p_dynamic)
p_dynamic
# Dynamic chart
p_dynamic <- p + theme_economist() + scale_colour_economist() + scale_colour_discrete(guide = guide_legend(title = "US. States")) + theme(legend.position = 'none')
p_dynamic <- ggplotly(p_dynamic)
p_dynamic
# All year/time Prevalence data with: Source_UC == 'ADDM' & State_Full2 == 'AZ-Arizona'
ASD_State_Subset <- subset(ASD_State, Source_UC == 'ADDM' & State_Full2 == 'AZ-Arizona')
# Line plot/chart for < State ASD Prevalence [ADDM] [AZ-Arizona] >
p <- ggplot(ASD_State_Subset, aes(x = Year, y = Prevalence))
# Select (add) line chart type:
p <- p + geom_line(aes(color = State_Full2),
linetype = "solid",  # http://sape.inf.usi.ch/quick-reference/ggplot2/linetype
size=1,
alpha=0.5)
# Select (add) points to chart:
p <- p + geom_point(aes(color = State_Full2),
size=3,
shape=20,
alpha=0.5)
# Customize legend name:
p <- p + labs(color = "US. State")
# Adjust x and y axis, scale, limit and labels:
p <- p + scale_y_continuous(name = "Prevalence per 1,000 Children",
breaks = seq(0, 30, 5),
limits=c(0, 30)) +
scale_x_continuous(name = "Year",
breaks = seq(2000, 2016, 1),
limits = c(2000, 2016))
# Customize chart title:
p <- p + ggtitle("ASD Prevalence by Year [ADDM] [AZ-Arizona]")
# Customize chart title and axis labels:
p <- p + theme(title = element_text(face = 'bold.italic', color = "darkslategrey"),
axis.title = element_text(face = 'plain', color = "darkslategrey"))
# Show plot
p
# theme of the economist magazine:
p + theme_economist() + scale_colour_economist()
p <- ggplot(ASD_State_ADDM, aes(x = Year, y = Prevalence))
# Select (add) line chart type:
p <- p + geom_line(aes(color = State_Full2),
linetype = "solid",  # http://sape.inf.usi.ch/quick-reference/ggplot2/linetype
size=1,
alpha=0.5)
# Select (add) points to chart:
p <- p + geom_point(aes(color = State_Full2),
size=3,
shape=20,
alpha=0.5)
# Show plot
p
# Customize line color and legend name:
p <- p + labs(color = "US. State")
# Adjust x and y axis, scale, limit and labels:
p <- p + scale_y_continuous(name = "Prevalence per 1,000 Children",
breaks = seq(0, 30, 5),
limits=c(0, 30)) +
scale_x_continuous(name = "Year (2000 - 2016)",
breaks = seq(2000, 2016, 1),
limits = c(2000, 2016))
# Customize chart title:
p <- p + ggtitle("ASD Prevalence by Year [ADDM] [All States]")
# Customize chart title and axis labels:
p <- p + theme(title = element_text(face = 'bold.italic', color = "darkslategrey"),
axis.title = element_text(face = 'plain', color = "darkslategrey"),
legend.position="right")
# Show plot
p
# Dynamic chart
p_dynamic <- p + theme_economist() + scale_colour_economist() + scale_colour_discrete(guide = guide_legend(title = "US. States"))
p_dynamic <- ggplotly(p_dynamic)
p_dynamic
# Show plot in facet_grid
p + facet_grid(facets = . ~ State_Full1) +
theme(legend.position = "none", # Hide legend
axis.text.x=element_blank(),  # Hide axis
axis.ticks.x=element_blank(), # Hide axis
panel.background = element_blank() # Remove panel background
)
# Dynamic chart
p_dynamic <- p + theme_economist() + scale_colour_economist() + scale_colour_discrete(guide = guide_legend(title = "US. States"))
p_dynamic <- ggplotly(p_dynamic)
p_dynamic
# Show plot in facet_grid
p <- p + facet_grid(facets = . ~ State_Full1) +
theme(legend.position = "none", # Hide legend
axis.text.x=element_blank(),  # Hide axis
axis.ticks.x=element_blank(), # Hide axis
panel.background = element_blank() # Remove panel background
)
# Show plot
p
# Dynamic chart
p_dynamic <- p + theme_economist() + scale_colour_economist() + scale_colour_discrete(guide = guide_legend(title = "US. States"))
p_dynamic <- ggplotly(p_dynamic)
p_dynamic
# Dynamic chart
p_dynamic <- p + theme_economist() + scale_colour_economist() + scale_colour_discrete(guide = guide_legend(title = "US. States")) + theme(legend.position = 'none')
p_dynamic <- ggplotly(p_dynamic)
p_dynamic
# Show plot
p
# ----------------------------------
# EDA - Visualization on map
# ----------------------------------
# https://cran.r-project.org/web/packages/usmap/vignettes/mapping.html
if(!require(usmap)){install.packages("usmap")}
library(usmap) # usmap: Mapping the US
# Prepare data
Map_Data_Source = 'addm' # Available values lowercase: 'addm', 'medi', 'nsch', 'sped'.
Map_Data_Year = 2012 # must be integer
Map_Data_Value = 'Prevalence' # variable must be numeric, variable name in 'quotation'. Or else Error: Discrete value supplied to continuous scale
ASD_State_Subset = subset(ASD_State, Source == Map_Data_Source & Year == Map_Data_Year)
ASD_State_Subset$state = ASD_State_Subset$State
# Show data on map
plot_usmap(data = ASD_State_Subset, values = Map_Data_Value, color = "darkgrey") +
scale_fill_continuous(
low="lightblue", high = "darkblue", name = "Prevalence per 1,000 Children:", label = scales::comma,
limits=c(0, 40) #same colour levels/limits for plots
) +
labs(title = "Prevalence Estimates by Geographic Area",
subtitle = paste("Prevalence by US. State    Source [", Map_Data_Source, "] Year [", Map_Data_Year, "]")
) +
theme(panel.background = element_rect(color = "white", fill = "white"),
legend.position = "right")
# Prepare data
Map_Data_Source = 'addm' # Available values lowercase: 'addm', 'medi', 'nsch', 'sped'.
Map_Data_Year = 2012 # must be integer
Map_Data_Value = 'Prevalence' # variable must be numeric, variable name in 'quotation'. Or else Error: Discrete value supplied to continuous scale
ASD_State_Subset = subset(ASD_State, Source == Map_Data_Source & Year == Map_Data_Year)
ASD_State_Subset$state = ASD_State_Subset$State
# Show data on map
plot_usmap(data = ASD_State_Subset, values = Map_Data_Value, color = "darkgrey") +
scale_fill_continuous(
low="lightblue", high = "darkblue", name = "Prevalence\nper 1,000\nChildren", label = scales::comma,
limits=c(0, 40) #same colour levels/limits for plots
) +
labs(title = "Prevalence Estimates by Geographic Area",
subtitle = paste("Prevalence by US. State    Source [", Map_Data_Source, "] Year [", Map_Data_Year, "]")
) +
theme(panel.background = element_rect(color = "white", fill = "white"),
legend.position = "right")
# Prepare data (sped 2016)
Map_Data_Source = 'sped' # Available values lowercase: 'addm', 'medi', 'nsch', 'sped'.
# Prepare data
Map_Data_Source = 'addm' # Available values lowercase: 'addm', 'medi', 'nsch', 'sped'.
Map_Data_Year = 2012 # must be integer
Map_Data_Value = 'Prevalence' # variable must be numeric, variable name in 'quotation'. Or else Error: Discrete value supplied to continuous scale
ASD_State_Subset = subset(ASD_State, Source == Map_Data_Source & Year == Map_Data_Year)
ASD_State_Subset$state = ASD_State_Subset$State
# Show data on map
plot_usmap(data = ASD_State_Subset, values = Map_Data_Value, color = "darkgrey") +
scale_fill_continuous(
low="lightblue", high = "darkblue", name = "Prevalence\nper 1,000\nChildren", label = scales::comma,
limits=c(0, 40) #same colour levels/limits for plots
) +
labs(title = "Prevalence Estimates by Geographic Area",
subtitle = paste("Prevalence by US. State    Source [", Map_Data_Source, "] Year [", Map_Data_Year, "]")
) +
theme(panel.background = element_rect(color = "white", fill = "white"),
legend.position = "right")
# Prepare data (sped 2016)
Map_Data_Source = 'sped' # Available values lowercase: 'addm', 'medi', 'nsch', 'sped'.
Map_Data_Year = 2016 # must be integer
Map_Data_Value = 'Prevalence' # variable must be numeric, variable name in 'quotation'. Or else Error: Discrete value supplied to continuous scale
ASD_State_Subset = subset(ASD_State, Source == Map_Data_Source & Year == Map_Data_Year)
ASD_State_Subset$state = ASD_State_Subset$State
plot_usmap(data = ASD_State_Subset, values = Map_Data_Value, color = "darkgrey") + scale_fill_continuous(low="lightblue", high = "darkblue", name = "Prevalence\nper 1,000\nChildren", label = scales::comma, limits=c(0, 40)) + labs(title = "Prevalence Estimates by Geographic Area", subtitle = paste("Prevalence by US. State    Source [", Map_Data_Source, "] Year [", Map_Data_Year, "]")) + theme(panel.background = element_rect(color = "white", fill = "white"), legend.position = "right")
# Prepare data (sped 2015)
Map_Data_Source = 'sped' # Available values lowercase: 'addm', 'medi', 'nsch', 'sped'.
Map_Data_Year = 2015 # must be integer
Map_Data_Value = 'Prevalence' # variable must be numeric, variable name in 'quotation'. Or else Error: Discrete value supplied to continuous scale
ASD_State_Subset = subset(ASD_State, Source == Map_Data_Source & Year == Map_Data_Year)
ASD_State_Subset$state = ASD_State_Subset$State
plot_usmap(data = ASD_State_Subset, values = Map_Data_Value, color = "darkgrey") + scale_fill_continuous(low="lightblue", high = "darkblue", name = "Prevalence\nper 1,000\nChildren", label = scales::comma, limits=c(0, 40)) + labs(title = "Prevalence Estimates by Geographic Area", subtitle = paste("Prevalence by US. State    Source [", Map_Data_Source, "] Year [", Map_Data_Year, "]")) + theme(panel.background = element_rect(color = "white", fill = "white"), legend.position = "right")
# Prepare data (sped 2014)
Map_Data_Source = 'sped' # Available values lowercase: 'addm', 'medi', 'nsch', 'sped'.
Map_Data_Year = 2014 # must be integer
Map_Data_Value = 'Prevalence' # variable must be numeric, variable name in 'quotation'. Or else Error: Discrete value supplied to continuous scale
ASD_State_Subset = subset(ASD_State, Source == Map_Data_Source & Year == Map_Data_Year)
ASD_State_Subset$state = ASD_State_Subset$State
plot_usmap(data = ASD_State_Subset, values = Map_Data_Value, color = "darkgrey") + scale_fill_continuous(low="lightblue", high = "darkblue", name = "Prevalence\nper 1,000\nChildren", label = scales::comma, limits=c(0, 40)) + labs(title = "Prevalence Estimates by Geographic Area", subtitle = paste("Prevalence by US. State    Source [", Map_Data_Source, "] Year [", Map_Data_Year, "]")) + theme(panel.background = element_rect(color = "white", fill = "white"), legend.position = "right")
# Prepare data
Map_Data_Source = 'addm' # Available values lowercase: 'addm', 'medi', 'nsch', 'sped'.
Map_Data_Year = 2012 # must be integer
Map_Data_Value = 'Prevalence' # variable must be numeric, variable name in 'quotation'. Or else Error: Discrete value supplied to continuous scale
ASD_State_Subset = subset(ASD_State, Source == Map_Data_Source & Year == Map_Data_Year)
ASD_State_Subset$state = ASD_State_Subset$State
# Show data on map
p_map <- plot_usmap(data = ASD_State_Subset, values = Map_Data_Value, color = "darkgrey") +
scale_fill_continuous(
low="lightblue", high = "darkblue", name = "Prevalence\nper 1,000\nChildren", label = scales::comma,
limits=c(0, 40) #same colour levels/limits for plots
) +
labs(title = "Prevalence Estimates by Geographic Area",
subtitle = paste("Prevalence by US. State    Source [", Map_Data_Source, "] Year [", Map_Data_Year, "]")
) +
theme(panel.background = element_rect(color = "white", fill = "white"),
legend.position = "right")
# Show plot
p_map
# Dynamic chart
p_dynamic <- p_map
p_dynamic <- ggplotly(p)
p_dynamic
# Dynamic chart
p_dynamic <- p_map
p_dynamic <- ggplotly(p_dynamic)
p_dynamic
# Show data on map
p_map <- plot_usmap(data = ASD_State_Subset, values = Map_Data_Value, color = "darkgrey") +
scale_fill_continuous(
low="lightblue", high = "darkblue", name = "Prevalence\nper 1,000\nChildren", label = scales::comma,
limits=c(0, 40) #same colour levels/limits for plots
) +
labs(title = "Prevalence Estimates by Geographic Area",
subtitle = paste("Prevalence by US. State    Source [", Map_Data_Source, "] Year [", Map_Data_Year, "]")
) +
theme(panel.background = element_rect(color = "white", fill = "white"),
legend.position = "right")
# Show plot
p_map
# Dynamic chart
p_dynamic <- p_map
p_dynamic <- ggplotly(p_dynamic)
# Dynamic chart
p_dynamic <- p_map
p_dynamic <- ggplotly(p_dynamic)
devtools::install_github('hadley/ggplot2')
install.packages("devtools")
View(ASD_State_MEDI)
View(ASD_State_MEDI)
library('ggthemes')
library('ggplot2')
library('usmap')
library('plotly')
# Dynamic chart
p_dynamic <- p_map
p_dynamic <- ggplotly(p_dynamic)
p_dynamic
# Dynamic chart
p_dynamic <- p_map
p_dynamic <- ggplotly(p_dynamic)
p_dynamic
